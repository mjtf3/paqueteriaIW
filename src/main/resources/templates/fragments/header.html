<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<body>
    <header class="header" th:fragment="header(currentPage)">
        <nav>
            <!-- Enlaces comunes -->
            <a th:href="@{/tarifas}" th:classappend="${currentPage == 'tarifas'} ? 'active' : ''">Inicio</a>
            <a th:href="@{/seguimiento}" th:classappend="${currentPage == 'seguimiento'} ? 'active' : ''">Seguimiento</a>

            <!-- Opciones para Tienda/Cliente -->
            <a th:if="${usuarioActual != null && usuarioActual.isTienda()}" th:href="@{/tienda/{id}/apikey(id=${usuarioActual.id})}" th:classappend="${currentPage == 'apikey'} ? 'active' : ''">API KEY</a>

            <!-- Opciones para Repartidor -->
            <a th:if="${usuarioActual != null && usuarioActual.isRepartidor()}" th:href="@{/repartidores/{id}/historial(id=${usuarioActual.id})}" th:classappend="${currentPage == 'historial'} ? 'active' : ''">Historial</a>
            <a th:if="${usuarioActual != null && usuarioActual.isRepartidor()}" th:href="@{/repartidores/{id}/ruta(id=${usuarioActual.id})}" th:classappend="${currentPage == 'ruta'} ? 'active' : ''">Ruta</a>

            <!-- Opciones para Webmaster/Admin -->
            <a th:if="${usuarioActual != null && usuarioActual.isAdmin()}" th:href="@{/webmaster/repartidores}" th:classappend="${currentPage == 'admin-repartidores'} ? 'active' : ''">Repartidores</a>
            <a th:if="${usuarioActual != null && usuarioActual.isAdmin()}" th:href="@{/webmaster/tiendas}" th:classappend="${currentPage == 'admin-tiendas'} ? 'active' : ''">Tiendas</a>
            <a th:if="${usuarioActual != null && usuarioActual.isAdmin()}" th:href="@{/webmaster/pedidos}" th:classappend="${currentPage == 'admin-pedidos'} ? 'active' : ''">Pedidos</a>
            <a th:if="${usuarioActual != null && usuarioActual.isAdmin()}" th:href="@{/webmaster/historial}" th:classappend="${currentPage == 'admin-historial'} ? 'active' : ''">Historial</a>
        </nav>
        <div class="user-dropdown">
            <a th:href="@{/perfil}" class="user-icon-link" th:classappend="${currentPage == 'perfil'} ? 'active' : ''">
                <div class="user-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                </div>
            </a>
            <div th:if="${usuarioActual != null}" class="dropdown-menu">
                <a th:href="@{/perfil}" class="dropdown-item">Perfil</a>
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="dropdown-item">Cerrar sesi√≥n</button>
                </form>
            </div>
        </div>
    </header>
</body>
</html>
